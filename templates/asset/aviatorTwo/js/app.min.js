document.addEventListener('DOMContentLoaded', () => {
  const t = document.getElementById('go-btn'),
    a = document.getElementById('animation');
  let i = !0,
    e = 0;
  const n = 3e3,
    o = 140;
  t.addEventListener('click', () => {
    i = !1;
  });
  const m = (function (t) {
    const i = document.createElement('div');
    function e(t, a) {
      const i = document.createElement('div');
      return (
        (i.className = 'aviator-game__animation-item'),
        (i.innerHTML = `\n        <img class="aviator-game__animation-item-img" src="https://landix.group/asset/aviatorTwo/img/avatars/${a + 1}.webp" />\n        <span class="aviator-game__animation-item-text">${t.id}</span>\n        <span class="aviator-game__animation-item-text">${t.amount.toFixed(2)}</span>\n        <span class="aviator-game__animation-item-tag ${t.multiplier >= 3 ? 'is--purple' : ''}">${t.multiplier.toFixed(2)}x</span>\n        <span class="aviator-game__animation-item-text">${t.total.toFixed(2)}</span>\n      `),
        i
      );
    }
    i.className = 'aviator-game__animation-container';
    for (let a = 0; a < 4; a++)
      t.forEach((t, a) => {
        i.appendChild(e(t, a));
      });
    return (a.appendChild(i), i);
  })([
    { id: '4***0', amount: 200, multiplier: 1.34, total: 268 },
    { id: '5***4', amount: 178, multiplier: 2.89, total: 353.43 },
    { id: '3***9', amount: 145, multiplier: 1.1, total: 159.5 },
    { id: '1***1', amount: 120, multiplier: 1.25, total: 150 },
    { id: '5***4', amount: 100, multiplier: 1.39, total: 139 },
    { id: '3***1', amount: 60, multiplier: 1.44, total: 86.4 },
    { id: '1***2', amount: 60, multiplier: 1.71, total: 102.6 },
    { id: '9***9', amount: 50, multiplier: 3.06, total: 153 },
    { id: '8***8', amount: 40, multiplier: 1.78, total: 71.2 },
    { id: '6***9', amount: 40, multiplier: 3.1, total: 124 },
    { id: '2***3', amount: 40, multiplier: 1.13, total: 45.2 }
  ]);
  !(function t() {
    i &&
      (0 === e &&
        document.querySelectorAll('.aviator-game__animation-item.is--active').forEach((t) => {
          t.classList.remove('is--active');
        }),
      (e -= o),
      (m.style.transform = `translateY(${e}px)`),
      Math.abs(e) >= m.offsetHeight / 2 && (e = 0),
      (function () {
        const t = Array.from(document.querySelectorAll('.aviator-game__animation-item')).filter(
          (t) => {
            const i = t.getBoundingClientRect(),
              e = a.getBoundingClientRect();
            return i.top >= e.top && i.bottom <= e.bottom && !t.classList.contains('is--active');
          }
        );
        for (let a = 0; a < 3; a++)
          if (t.length > 0) {
            const a = Math.floor(Math.random() * t.length);
            (t[a].classList.add('is--active'), t.splice(a, 1));
          }
      })(),
      setTimeout(() => {
        i && requestAnimationFrame(t);
      }, n));
  })();
});
